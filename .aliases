#!/usr/bin/env bash
############################
# Shortcuts used in terminal
############################

# Easier navigation: .., ..., ...., ....., ~ and -
alias ..="cd .."
alias ...="cd ../.."
alias ....="cd ../../.."
alias .....="cd ../../../.."
alias ~="cd ~" # `cd` is probably faster to type though
alias -- -="cd -"

# Shortcuts
alias dl="cd ~/Downloads"
alias dt="cd ~/Desktop"
alias p="cd ~/projects"
alias d="cd ~/projects/dotfiles"
alias n="cd ~/projects/ang/notebook"
alias ag="cd ~/projects/ang/gen"

# Detect which `ls` flavor is in use
if ls --color > /dev/null 2>&1; then # GNU `ls`
	colorflag="--color"
	export LS_COLORS='no=00:fi=00:di=01;31:ln=01;36:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.gz=01;31:*.bz2=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.avi=01;35:*.fli=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.ogg=01;35:*.mp3=01;35:*.wav=01;35:'
else # macOS `ls`
	colorflag="-G"
	export LSCOLORS='BxBxhxDxfxhxhxhxhxcxcx'
fi

# List all files colorized in long format
alias l="ls -lF ${colorflag}"

# List all files colorized in long format, excluding . and ..
alias la="ls -lAF ${colorflag}"

# List only directories
alias lsd="ls -lF ${colorflag} | grep --color=never '^d'"

# Always use color output for `ls`
alias ls="command ls ${colorflag}"

alias cp='cp -Rv'
alias mkdir='mkdir -pv'
alias mv='mv -v'
alias wget='wget -c'

# Always enable colored `grep` output
# Note: `GREP_OPTIONS="--color=auto"` is deprecated, hence the alias usage.
alias grep='grep --color=auto'
alias fgrep='fgrep --color=auto'
alias egrep='egrep --color=auto'

# Enable aliases to be sudoâ€™ed
alias sudo='sudo '

# Get week number
alias week='date +%V'

# IP addresses
alias ip="dig +short myip.opendns.com @resolver1.opendns.com"
alias localip="ipconfig getifaddr en0"
alias ips="ifconfig -a | grep -o 'inet6\? \(addr:\)\?\s\?\(\(\([0-9]\+\.\)\{3\}[0-9]\+\)\|[a-fA-F0-9:]\+\)' | awk '{ sub(/inet6? (addr:)? ?/, \"\"); print }'"

# Show active network interfaces
alias ifactive="ifconfig | pcregrep -M -o '^[^\t:]+:([^\n]|\n\t)*status: active'"

# firewall management
alias port-forward-enable="echo 'rdr pass inet proto tcp from any to any port 2376 -> 127.0.0.1 port 2376' | sudo pfctl -ef -"
alias port-forward-disable="sudo pfctl -F all -f /etc/pf.conf"
alias port-forward-list="sudo pfctl -s nat"

# Trim new lines and copy to clipboard
alias c="tr -d '\n' | pbcopy"

# Recursively delete `.DS_Store` files
alias cleanup="find . -type f -name '*.DS_Store' -ls -delete"

# Reload the shell (i.e. invoke as a login shell)
alias reload="exec ${SHELL} -l"

# Print each PATH entry on a separate line
alias path='echo -e ${PATH//:/\\n}'

# git

# alias g='git'
# alias ga='git add'
# alias gaa='git add --all'
# alias gco='git checkout'
# alias gcom='git checkout master'
# alias gcob='git checkout -b'
# alias gcm='git commit -vam'
# alias gst='git status'
# alias gd='git diff'
# alias gp='git pull'
# alias gph='git push'
# alias gap='git add -p'
# alias gb='git branch'
# alias gba='git branch --all'
# alias gbd='git branch -D'
# alias gbda='git branch --no-color --merged | command grep -vE "^(\*|\s*(master|develop|dev)\s*$)" | command xargs -n 1 git branch -d'
# alias gbo='git branch --set-upstream-to=origin/$(git symbolic-ref --short HEAD) $(git symbolic-ref --short HEAD)'
# alias gbu='git branch --set-upstream-to=upstream/$(git symbolic-ref --short HEAD) $(git symbolic-ref --short HEAD)'
# alias gac='git add --all && git commit -v'
# alias gac!='git add --all && git commit -v --amend'
# alias gacn!='git add --all && git commit --amend --no-edit'
# alias gacm='git add --all && git commit -m'
# alias gcop='git checkout -p'
# alias gcp='git cherry-pick'
# alias gcpa='git cherry-pick --abort'
# alias gcpc='git cherry-pick --continue'
# alias gds='git diff --cached'
# alias gd!='git difftool -d'
# alias gds!='git difftool -d --cached'
# alias gf='git fetch --tags'
# alias gl='git pull --tags -f --rebase --autostash'
# alias glog="git log --graph --pretty='%Cred%h%Creset%C(yellow)%d%Creset %s %Cgreen(%cr) %C(blue)<%an>%Creset' --abbrev-commit"
# alias gloga="git log --graph --pretty='%Cred%h%Creset%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit --all"
# alias glogp='git log -p'
# alias gm='git merge'
# alias gma='git merge --abort'
# alias gpf='git push --force-with-lease'
# alias gpf!='git push --force'
# alias gra='git remote add'
# alias grr='git remote remove'
# alias grv='git remote -v'
# alias grba='git rebase --abort'
# alias grbc='git rebase --continue'
# alias grbi='git rebase -i'
# alias grbm='git rebase -i master'
# alias grbom='git rebase -i origin/master'
# alias gr='git reset'
# alias gr!='git reset --hard'
# alias grh='git reset HEAD'
# alias grh!='git reset --hard HEAD'
# alias garh!='git add --all && git reset --hard HEAD'
# alias gs='git show --show-signature'
# alias gss='git status -sb'
# alias gsa='git submodule add'
# alias gsu='git submodule update --remote'
# alias gsr='git submodule-remove'

# Use programs without a root-equivalent group
alias docker='sudo docker'
alias docker-compose='sudo docker-compose'
alias npm='sudo npm'


# Kubectl
# alias k='kubectl'
# alias kp='kubectl get pods -o wide'
# alias kdp='kubectl describe pod'
# alias kdn='kubectl describe node'
# alias kc='kubectx "$(kubectx | fzf --height=10%)"'
# alias kn='kubens "$(kubens | fzf --height=10%)"'
# alias kd='k describe'
# alias kd!='kd --all-namespaces'
# alias kdp='kd pod'
# alias kdel='k delete'
# alias ke='k exec -ti'
# alias kg='k get'
# alias kg!='kg --all-namespaces'
# alias kgd='kg deployment'
# alias kgd!='kgd --all-namespaces'
# alias kgp='kg pod'
# alias kgp!='kgp --all-namespaces'
# alias kgs='kg service'
# alias kgs!='kgs --all-namespaces'
# alias kl='kubectl logs -f'

# Python
alias pip='pip3'
alias pym='python3 manage.py'
alias mkenv='python3 -m venv env'
alias startenv='source env/bin/activate && which python3'
alias stopenv='deactivate'